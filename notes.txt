qol
- double-click track header opens track details
- react-router hash navigation between projects
- cmd+J to open sidebar, cmd+D to open details, 

x structured-state todo:
  x expose map, set
  x state is not a tree, it's a graph: container should be a set, and updates should be done with tokens to avoid cycles

top prio:
x reorder tracks
x reorder effects
x dirty state for project
x right-click messes up dragging state

top prio:
x live note editing
x CMD+D for clips
x midi drag clips
x close plugin window if plugin is deleted/replaced(instrument)
x persist solo / mute
x persist track gain
- persist wam params
- duplicate doesn't correctly delete destination
- undo solo / mute
  - substate don't duplicate sset contents

/**
 * TODO:
 * - Make timeline view track separator taller, like the one on the TrackHeader
 *   so it's easier to grab.
 * [x] Render with panning, gain, effects.
 * - Level Meters in DSP
 * [x] Drop to upload audio file
 * - DSP Bypass button get working
 * [x] DSP Search Box get working
 * [x] Overscroll towards the end of the project means we got to scroll extra to come back
 * [x] resizing with slider should resize around the cursor, not 0:00
 * [x] Load previous project if it exists, instead of creating a new one
 */


todo:
- bypass for all audio effects
- midi learn?
- automation?
- loop clips
x peak meters
- rename library items
x files in project
- automated effects
- package for all projects, including new
- move clips using drag data, which will allow it to move to the library too, outside the browser
- drag clip to outside browser?


substate
x redo
x dirty

lowpri:
- consolidate audio

tracks:
- Ordered map?
- or: track map (id -> Track) and track order (id[])

todo: bugs
- Undo is pretty broken
- Ocassionaly, clicking clips appends-to instead of replacing selection
- Moving a clip to a locked track deletes the clip
- Moving clips to different tracks locks them in that track
- Opening projects might cause ticks in the timeline disappear

todo: snap resize clip to grid 
- clip editor: toggle between seconds, frames, beats units for viewing and editing
- slide audio within clip tool
x bug: reorganizing clip throws assertion error

TODO:
x Implement own panel component perhaps?
x Implement piano roll editor area
x Move MidiDemo piano roll into new piano roll editor
x Figure out how to save and load data, so piano roll midi lives in clips

MAYBE: 
- Switch audio timing to be frames, for maximum precision (avoid time floats)

NAME:
- Orion
- Cephei
  - cephei.app available
webdaw.app
webdaw.pro
minidaw.app

notepad
- really good midi editing

check out:
https://www.npmjs.com/package/audio-buffer-utils
https://www.npmjs.com/package/pitch-shift
https://www.npmjs.com/package/audio-buffer-sink
https://www.npmjs.com/package/bpm-detective

https://wac2022.i3s.univ-cotedazur.fr/node/27.html
https://www.npmjs.com/package/soundstretch-web
https://www.npmjs.com/package/rubberband-web





TimelineTrack
- header, dsp, 
- .content
  - AudioTrackContent
  - MidiTrackContent


StandardClip
- looping if content.length < length
- start, length, etc
- .content
  - AudioClipContent
    .start, length
  - MidiClipContent
    .start, length
